---
title: "Лабораторная работа №5"
author: "Кувшинова К.О. группа НФИ-02-19"
subtitle: "Дискреционное разграничение прав в Linux. Исследование влияния дополнительных атрибутов"
output:
  word_document: default
  pdf_document: default
toc-title: Содержание
toc: yes
toc_depth: 2
lof: yes
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: yes
pdf-engine: lualatex
header-includes:
- \linepenalty=10
- \interlinepenalty=0
- \hyphenpenalty=50
- \exhyphenpenalty=50
- \binoppenalty=700
- \relpenalty=500
- \clubpenalty=150
- \widowpenalty=150
- \displaywidowpenalty=50
- \brokenpenalty=100
- \predisplaypenalty=10000
- \postdisplaypenalty=0
- \floatingpenalty = 20000
- \raggedbottom
- \usepackage{float}
- \floatplacement{figure}{H}
---


# Цель работы

Целью данной лабораторной работы является изучить механизмы изменения идентификаторов, применения SetUID- и Sticky-битов. Получение практических навыков работы в консоли с дополнительными атрибутами. Рассмотрение работы механизма смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.

# Подготовка лабораторного стенда

1. Установили компилятор gcc командой **yum install gcc**. 
2. Отключили систему запретов до очередной перезагрузки системы командой **setenforce 0**. После этого команда getenforce вывела *Permissive*. (@fig:001)
   
![Установка компилятора gcc](1.JPG){#fig:001 width=100%}

# Выполнение лабораторной работы

## Создание программы

1. Вошли в систему от имени пользователя guest.
2. Создали программу simpleid.c. (@fig:002)

![Программа simpleid.c](3.JPG){#fig:002 width=100%}

3. Скомплилировали программу и убедились, что файл программы создан с помощью команды **gcc simpleid.c -o simpleid**. Выполнили программу simpleid: **./simpleid**, а затем выполнили системную программу **id**. Обе программы выводят одинаковые значения для uid и gid. (@fig:003)

![Выполнение программ simpleid и id](2.JPG){#fig:003 width=100%}

4. Усложнили программу, добавив вывод действительных идентификаторов и назвали ее simpleid2.c. (@fig:004)

![Программа simpleid2.c](4.JPG){#fig:004 width=100%}

5. Скомпилировали и запустили simpleid2.c **gcc simpleid2.c -o simpleid2** ->
**./simpleid2**. (@fig:005)

![Выполнение программы simpleid2.c](5.JPG){#fig:005 width=100%}

6. От имени суперпользователя выполнили команды: **chown root:guest /home/guest/simpleid2** -> **chmod u+s /home/guest/simpleid2**. Повысили временно свои права с помощью **su root**. Выполнили проверку правильности установки новых атрибутов и смены владельца файла simpleid2: **ls -l simpleid2**. Запустили simpleid2 и id с помощью команд **./simpleid2** -> **id**. Значения вывода обеих программ совпадают. (@fig:006)

![Выполнение программ simpleid2 и id](6.JPG){#fig:006 width=100%}

7. Проделали тоже самое относительно SetGID-бита.Значения вывода обеих программ совпадают, только в отличие от предыдущего пункта значение e_gid = 1002. (@fig:007)

![Выполнение программ simpleid2 и id относительно SetGID-бита](7.1.JPG){#fig:007 width=100%}

8. Создали программу readfile.c. (@fig:008)

![Программа readfile.c](13.JPG){#fig:008 width=100%}

9. Откомпилировали программу readfile.c:  **gcc readfile.c -o readfile**. Сменили владельца у файла readfile.c и изменили права так, чтобы только суперпользователь (root) мог прочитать его, a guest не мог. (@fig:009)

![Смена владельца и изменение прав программы readfile.c](15.JPG){#fig:009 width=100%}

10.  Проверили, что пользователь guest не может прочитать файл readfile.c.(@fig:010)

![Проверка возможности чтения файла  readfile.c пользователем guest](16.JPG){#fig:010 width=100%}

11. Сменили у программы readfile владельца и установили SetU’D-бит. (@fig:011)

![Смена у программы readfile владельца и установка SetU’D-бита](17.JPG){#fig:011 width=100%}

12. Проверим, может ли программа readfile прочитать файл readfile.c. Да,  может. (@fig:012)

![Чтение программой readfile файла readfile.с](18.JPG){#fig:012 width=100%}

13. Проверим, может ли программа readfile прочитать файл /etc/shadow. Да,  может. (@fig:013)

![Чтение программой readfile файла readfile.с](19.JPG){#fig:013 width=100%}

## Исследование Sticky-бита

1. Выяснили, что установлен атрибут Sticky на директории /tmp с помощью команды  **ls -l / | grep tmp**. От имени пользователя guest создали файл file01.txt в директории /tmp со словом test. (@fig:014)

![Выполнение команды ls -l / | grep tmp и создание файла file01.txt](20.JPG){#fig:014 width=100%}

2. Просмотрели атрибуты у только что созданного файла и разрешили чтение и запись для категории пользователей «все остальные». (@fig:015)

![Арибуты файла file01.txt](21.JPG){#fig:015 width=100%}

3. От пользователя guest2 (не являющегося владельцем) попробовали прочитать, дозаписать, записать, удалить файл /tmp/file01.txt. Выполнено все, кроме удаления файла. (@fig:016)

![Чтение, дозапись, запись, удаление файл /tmp/file01.txt](22.JPG){#fig:016 width=100%}

4. Повысили свои права до суперпользователя командой **su -** и выполнили после этого команду, снимающую атрибут t (Sticky-бит) с директории /tmp: **chmod -t /tmp**. Покинули режим суперпользователя командой **exit**.(@fig:017)

![Сняли Sticky-бит с директории /tmp](23.JPG){#fig:017 width=100%}

5. От пользователя guest2 проверили, что атрибута t у директории /tmp
нет. (@fig:018)

![Отсутсвие атрибута t у директории /tmp](24.JPG){#fig:018 width=100%}

6. Повторили предыдущие шаги. В данном случае получилось выполнить удаление файла. (@fig:019)

![Чтение, дозапись, запись, удаление файл /tmp/file01.txt без атрибута t](25.JPG){#fig:019 width=100%}

7. Повысили свои права до суперпользователя и вернули атрибут t на директорию /tmp. (@fig:020)

![Чтение, дозапись, запись, удаление файл /tmp/file01.txt без атрибута t](26.JPG){#fig:020 width=100%}

# Вывод

В ходе выполнения лабораторной работы мы приобрели изучили механизмы изменения идентификаторов, применения SetUID- и Sticky-битов. Получили практические навыки работы в консоли с дополнительными атрибутами. Рассмотрели работу механизма смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.

# Библиография

1. Кулябов Д. С., Королькова А. В., Геворкян М. Н. Дискреционное разграничение прав в Linux. Исследование влияния дополнительных атрибутов [Текст] / Кулябов Д. С., Королькова А. В., Геворкян М. Н. - Москва: - 7 с. [^1]: Дискреционное разграничение прав в Linux. Исследование влияния дополнительных атрибутов.
2. Справочник 70 основных команд Linux: полное описание с примерами (https://eternalhost.net/blog/sozdanie-saytov/osnovnye-komandy-linux)
  